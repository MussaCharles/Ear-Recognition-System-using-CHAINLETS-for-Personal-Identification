%start_gui_single_mode.m 
%Script file to generate the GUI 
%Honors Project 2001~2002 
%wuzhili 99050056 
%comp sci HKBU 
%last update 19/April/2002 
 
clear 
FigWin = figure('Position',[50 -50 1290 500],...
   'Name',' Ear Biometric Recognition ',... 
   'NumberTitle','off',... 
   'Color','b'); 
 
AxesHandle1 = axes('Position',[0.2 0.15 0.35 0.7],... 
   'Box','on'); 
AxesHandle2 = axes('Position',[0.6 0.15 0.35 0.7],... 
   'Box','on'); 
 
BackColor = get(gcf,'Color'); 
%[ 0.827450980392157 0.815686274509804 0.776470588235294 ] 
 
%[ 0.741176470588235 0.725490196078431 0.658823529411765 ] 
 
FrameBox = uicontrol(FigWin,... 
   'Units','normalized', ... 
   'Style','frame',... 
   'BackgroundColor',[ 0.741176470588235 0.725490196078431 0.658823529411765 ],... 
   'ForegroundColor',[ 0.741176470588235 0.725490196078431 0.658823529411765 ],... 
	'Position',[0 0 0.18 1]); 
 
%create static text. 
Text2 = uicontrol(FigWin,... 
   'Style','text',... 
   'Units','normalized', ... 
   'Position',[0.18 0.9 .88 0.05],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor','y',... 
   'HorizontalAlignment','center', ... 
   'String',' Ear Biometric System '); 
 
 
Text2 = uicontrol(FigWin,... 
   'Style','text',... 
   'Units','normalized', ... 
   'Position',[0 0 1 0.05],... 
   'FontSize',20,... 
   'BackgroundColor',[ 0.741176470588235 0.725490196078431 0.658823529411765 ],... 
   'ForegroundColor','w',...
   'HorizontalAlignment','right', ... 
   'String','Ear Verification '); 
 
w=16; 
text0='\fontsize{20} \color{white}Load Ear Image'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,400,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','Load Ear Image',... 
   'Callback',... 
   ['image1=loadimage;'... 
    'subplot(AxesHandle1);'... 
    'imagesc(image1);'... 
    'title(text0);'... 
	 'colormap(gray);']); 
 
text1='\fontsize{20} \color{white}Enhancement by histogram Equalization'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,370,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','Contrast Enhancement',... 
   'Callback',... 
   ['subplot(AxesHandle2);image1=histeq(uint8(image1)); origimg=image1;imagesc(image1);title(text1);']); 

text2='\fontsize{20} \color{white}Adaptive Binarization after FFT'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,340,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','Binarization & Dilation',... 
   'Callback',... 
   [%'W=inputdlg(text);W=str2num(char(W));'... 
      'subplot(AxesHandle1);'... 
      'image1=adaptiveThres((image1));title(text2);']); 
  
text3='\fontsize{20} \color{white}Region Of Interest(ROI)'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
	'Position',[0,310,230,30],... 
    'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
	'String','ROI Area',... 
	'Callback',... 
   ['subplot(AxesHandle2);[image1]=drawROI(image1);title(text3);']); 

text31='\fontsize{20} \color{white}Apply (ROI) to Orig. Image'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
	'Position',[0,280,230,30],... 
    'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
	'String','ROI X Orig. Image',... 
	'Callback',... 
   ['subplot(AxesHandle1);[image1]=drawROI2(image1,origimg);title(text31);']);  

%{
text='Please input the FFT factor(0~1)'; 
text_fft='\fontsize{20} \color{white}Enhancement by FFT'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,340,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','fft',... 
   'Callback',... 
   ['W=inputdlg(text);W=str2double(char(W));'... 
    'subplot(AxesHandle1);image1=fftenhance(image1,W);imagesc(image1);title(text_fft);']); 
%}
   
text5='\fontsize{20} \color{white}Extract Skin Color'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,250,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','Skin Detection',... 
   'Callback',... 
   ['subplot(AxesHandle2);[sknimg]=image1;[image1]=skinn(image1);title(text5);']);
text6='\fontsize{20} \color{white} Edge Detection'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
   'Position',[0,220,230,30],... 
   'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
   'String','Deep Contour',... 
	'Callback',... 
   ['subplot(AxesHandle1);[image1]=deepcontour(sknimg);title(text6);']);
 
text4='\fontsize{20} \color{white}Extract CHAINLETS'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
	'Position',[0,190,230,30],... 
    'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
	'String','Extract CHAINLETS',... 
	'Callback',... 
   ['subplot(AxesHandle2);[f]=CHAINLETS(image1,double(rgb2gray(origimg)));title(text4);']); 

%save template file, including the minutia position,direction,and ridge information 
text10='Input file name'; 
h=uicontrol(FigWin,... 
   'Style','pushbutton',... 
	'Position',[0,160,230,30],... 
    'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
	'String','save',... 
   'Callback',... 
   ['W=inputdlg(text10);W=char(W);'... 
    'save(W,''f'',''-mat'');']); 
 
%invoke template file loader and do matching 
h=uicontrol('Style','pushbutton',... 
   'String','Match',... 
	'Position',[0,130,230,30],... 
    'FontSize',20,... 
   'FontWeight', 'bold',...
   'BackgroundColor',[0.95 0.95 0.95],...
	'Callback',... 
   ['finger1=fingerTemplateRead;'... 
    'finger2=fingerTemplateRead;'... 
    'percent_match=match_end(finger1,finger2);']); 